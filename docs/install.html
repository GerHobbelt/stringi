<!DOCTYPE html>


<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Installing stringi &mdash; stringi</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  

  
  

  
    <link rel="canonical" href="https://stringi.gagolewski.com/install.html" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="General Design Principles" href="weave/design_principles.html" />
    <link rel="prev" title="stringi: Fast and Portable Character String Processing in R" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> stringi
          

          
          </a>

          
            
            
              <div class="version">
                1.7.11
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">stringi</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">About</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com/">Author</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installing <em>stringi</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#icu4c">ICU4C</a></li>
<li class="toctree-l2"><a class="reference internal" href="#icu-data-library-and-no-internet-access">ICU Data Library and No Internet Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="#c-11-issues">C++11 Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#customising-the-build-process">Customising the Build Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/stringi">Source Code (GitHub)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/stringi/issues">Bug Tracker and Feature Suggestions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://cran.r-project.org/package=stringi">CRAN Entry</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="weave/design_principles.html">General Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="weave/basic_operations.html">Basic String Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="weave/codepoint_comparing.html">Code-Pointwise Comparing</a></li>
<li class="toctree-l1"><a class="reference internal" href="weave/regular_expressions.html">Regular Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="weave/collation.html">Collation</a></li>
<li class="toctree-l1"><a class="reference internal" href="weave/other_operations.html">Other Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="weave/input_output.html">Input and Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="weave/example.html">Example Use Case: Data Preparation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rapi.html">R Package <em>stringi</em> Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://deepr.gagolewski.com">Deep R Programming</a></li>
<li class="toctree-l1"><a class="reference external" href="https://stringx.gagolewski.com/">stringx</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dx.doi.org/10.18637/jss.v103.i02">JStatSoft Paper</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/ExampleRcppStringi">C++ API — Rcpp Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="news.html">What Is New in <em>stringi</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="z_bibliography.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">stringi</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Installing <em>stringi</em></li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="index.html" class="btn btn-neutral float-left" title="stringi: Fast and Portable Character String Processing in R" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="weave/design_principles.html" class="btn btn-neutral float-right" title="General Design Principles" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="installing-stringi">
<h1>Installing <em>stringi</em><a class="headerlink" href="#installing-stringi" title="Permalink to this heading"></a></h1>
<p>In most cases, installing <em>stringi</em> is as simple as calling:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;stringi&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>However, due to the overwhelming complexity of the ICU4C library,
upon which <em>stringi</em> is based, and the colourful diversity of operating systems,
their flavours, and particular setups, some users may still experience
a few issues that hopefully can be resolved with the help of this short manual.</p>
<p>Also, some build tweaks are possible.</p>
<section id="icu4c">
<h2>ICU4C<a class="headerlink" href="#icu4c" title="Permalink to this heading"></a></h2>
<p>The stringi package depends on the ICU4C &gt;= 55 library.</p>
<p>If we install the package from sources and either:</p>
<ul class="simple">
<li><p>this requirement is not met (check out <a class="reference external" href="https://icu.unicode.org/download">https://icu.unicode.org/download</a>,
the <code class="docutils literal notranslate"><span class="pre">libicu-devel</span></code> rpm on Fedora/CentOS/OpenSUSE,
<code class="docutils literal notranslate"><span class="pre">libicu-dev</span></code> on Ubuntu/Debian, etc.),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> fails to find appropriate build settings
for ICU-based projects, or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">CMD</span> <span class="pre">INSTALL</span></code> is called with the <code class="docutils literal notranslate"><span class="pre">--configure-args='--disable-pkg-config'</span></code>
argument, or environment variable <code class="docutils literal notranslate"><span class="pre">STRINGI_DISABLE_PKG_CONFIG</span></code> is
set to non-zero or
<code class="docutils literal notranslate"><span class="pre">install.packages(&quot;stringi&quot;,</span> <span class="pre">configure.args=&quot;--disable-pkg-config&quot;)</span></code>
is executed,</p></li>
</ul>
<p>then ICU will be built together with stringi.
A custom subset of ICU4C 69.1 is shipped with the package.
We also include ICU4C 55.1 which can be used as a fallback version
(e.g., on older Solaris boxes).</p>
<blockquote>
<div><p>To get the most out of stringi, you are strongly encouraged to rely on our
ICU4C package bundle. This ensures maximum portability across all platforms
(Windows and macOS users by default fetch the pre-compiled binaries
from CRAN built precisely this way).</p>
</div></blockquote>
</section>
<section id="icu-data-library-and-no-internet-access">
<h2>ICU Data Library and No Internet Access<a class="headerlink" href="#icu-data-library-and-no-internet-access" title="Permalink to this heading"></a></h2>
<p>Note that if you choose to use our ICU4C bundle, then – by default – the
ICU data library will be downloaded from one of our mirror servers.
However, if you have already downloaded a version of <code class="docutils literal notranslate"><span class="pre">icudt*.zip</span></code> suitable
for your platform (big/little-endian), you may wish to install the
package by calling:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;stringi&quot;</span><span class="p">,</span> <span class="n">configure.vars</span><span class="o">=</span><span class="s">&quot;ICUDT_DIR=&lt;icudt_dir&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Moreover, if you have <strong>no internet access</strong> on the machines
you try to install stringi on, try fetching the latest development version
of the package, as it is shipped with the <code class="docutils literal notranslate"><span class="pre">ICU</span></code> data archives.
You can build a distributable source package that includes all the required
ICU data files (for off-line use) by omitting some relevant lines in
the <code class="docutils literal notranslate"><span class="pre">.Rbuildignore</span></code> file. The following command sequence should do the trick:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>wget https://github.com/gagolews/stringi/archive/master.zip -O stringi.zip
unzip stringi.zip
sed -i <span class="s1">&#39;/\/icu..\/data/d&#39;</span> stringi-master/.Rbuildignore
R CMD build stringi-master
</pre></div>
</div>
<p>Assuming the most recent development version of the package is numbered x.y.z,
a file named <code class="docutils literal notranslate"><span class="pre">stringi_x.y.z.tar.gz</span></code> is created in the current working directory.
The package can now be installed (the source bundle may be propagated via
<code class="docutils literal notranslate"><span class="pre">scp</span></code> etc.) by executing:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>R CMD INSTALL stringi_x.y.z.tar.gz
</pre></div>
</div>
<p>Alternatively, call from within an R session:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;stringi_x.y.z.tar.gz&quot;</span><span class="p">,</span> <span class="n">repos</span><span class="o">=</span><span class="kc">NULL</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="c-11-issues">
<h2>C++11 Issues<a class="headerlink" href="#c-11-issues" title="Permalink to this heading"></a></h2>
<p>A decent C++11 compiler is required to build ICU4C 69.1 from sources.</p>
<p>Note that Pre-4.9.0 GCC has a
<a class="reference external" href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=56019">bug</a> where
<code class="docutils literal notranslate"><span class="pre">::max_align_t</span></code> has been defined, but not <code class="docutils literal notranslate"><span class="pre">std::max_align_t</span></code>.
If our built-in workaround does not work, you may try calling:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;stringi&quot;</span><span class="p">,</span> <span class="n">configure.args</span><span class="o">=</span><span class="s">&quot;--with-extra-cxxflags=&#39;-std=c++11&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Overall, your build chain may be misconfigured, check out,
amongst others, <code class="docutils literal notranslate"><span class="pre">&lt;R_inst_dir&gt;/etc/Makeconf</span></code> (e.g., are you using
<code class="docutils literal notranslate"><span class="pre">-std=gnu++11</span></code> instead of <code class="docutils literal notranslate"><span class="pre">-std=c++11</span></code>?). Refer to
<a class="reference external" href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html">https://cran.r-project.org/doc/manuals/r-release/R-admin.html</a>
for more details.</p>
<p>There is an option of using the fallback version of ICU4C 55.1.
However, it requires the support of the <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code> type in a few functions,
(this is not part of the C++98 standard; works on Solaris, though). Try:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;stringi&quot;</span><span class="p">,</span> <span class="n">configure.args</span><span class="o">=</span><span class="s">&quot;--disable-cxx11&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="customising-the-build-process">
<h2>Customising the Build Process<a class="headerlink" href="#customising-the-build-process" title="Permalink to this heading"></a></h2>
<p>Additional features and options of the <code class="docutils literal notranslate"><span class="pre">./configure</span></code> script:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--disable-cxx11</span></code>: Disable C++11; if you build ICU4C from
sources, make sure your C++ compiler supports the <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code> type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--disable-icu-bundle</span></code>: Enforce system ICU.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--disable-pkg-config</span></code>: Disable <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>;
ICU4C will be compiled from sources.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--with-extra-cflags=FLAGS</span></code>: Additional C compiler flags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--with-extra-cppflags=FLAGS</span></code>: Additional C/C++ preprocessor flags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--with-extra-cxxflags=FLAGS</span></code>: Additional C++ compiler flags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--with-extra-ldflags=FLAGS</span></code>: Additional linker flags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--with-extra-libs=FLAGS</span></code>: Additional libraries to link against.</p></li>
</ul>
<p>Some influential environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ICUDT_DIR</span></code>: Optional directory with an already downloaded ICU data
archive (<code class="docutils literal notranslate"><span class="pre">icudt*.zip</span></code>); either an absolute path or a
path relative to <code class="docutils literal notranslate"><span class="pre">&lt;package</span> <span class="pre">source</span> <span class="pre">dir&gt;/src</span></code>; defaults to <code class="docutils literal notranslate"><span class="pre">icuXX/data</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PKG_CONFIG_PATH</span></code>: An optional list of directories to search for
<code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>’s <code class="docutils literal notranslate"><span class="pre">.pc</span></code> files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R_HOME</span></code>: Override the R directory, e.g.,
<code class="docutils literal notranslate"><span class="pre">/usr/lib64/R</span></code>. Note that <code class="docutils literal notranslate"><span class="pre">$R_HOME/bin/R</span></code> point to the R executable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CAT</span></code>: The <code class="docutils literal notranslate"><span class="pre">cat</span></code> command used to generate the list of source files to compile.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PKG_CONFIG</span></code>:The <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> command used to fetch the necessary compiler
flags to link to the existing <code class="docutils literal notranslate"><span class="pre">libicu</span></code> installation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_DISABLE_CXX11</span></code>: Disable C++11;
see also <code class="docutils literal notranslate"><span class="pre">--disable-cxx11</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_DISABLE_PKG_CONFIG</span></code>: Compile ICU from sources;
see also <code class="docutils literal notranslate"><span class="pre">--disable-pkg-config</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_DISABLE_ICU_BUNDLE</span></code>: Enforce system ICU;
see also <code class="docutils literal notranslate"><span class="pre">--disable-icu-bundle</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_CFLAGS</span></code>: see <code class="docutils literal notranslate"><span class="pre">--with-extra-cflags</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_CPPFLAGS</span></code>: see <code class="docutils literal notranslate"><span class="pre">--with-extra-cppflags</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_CXXFLAGS</span></code>: see <code class="docutils literal notranslate"><span class="pre">--with-extra-cxxflags</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_LDFLAGS</span></code>: see <code class="docutils literal notranslate"><span class="pre">--with-extra-ldflags</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRINGI_LIBS</span></code>: see <code class="docutils literal notranslate"><span class="pre">--with-extra-libs</span></code>.</p></li>
</ul>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this heading"></a></h2>
<p>We expect that with a correctly configured C++11 compiler and properly
installed system ICU4C distribution, you should face no problems
installing the package, especially if you use our ICU4C bundle and
have a working internet access.</p>
<p>If you do not manage to set up a successful stringi build, do not
hesitate to <a class="reference external" href="https://github.com/gagolews/stringi/issues">file a bug report</a>.
However, please check the list of archived (closed) issues first –
it is very likely that a solution to your problem has already been posted.</p>
<p>To help diagnose your error further, please run (from the terminal):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /tmp
wget https://github.com/gagolews/stringi/archive/master.zip
unzip master.zip
<span class="nb">cd</span> stringi-master
./configure
</pre></div>
</div>
<p>And submit the output from <code class="docutils literal notranslate"><span class="pre">./configure</span></code> as well as the contents of
<code class="docutils literal notranslate"><span class="pre">config.log</span></code>.</p>
</section>
</section>


           </div>
           
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="stringi: Fast and Portable Character String Processing in R" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="weave/design_principles.html" class="btn btn-neutral float-right" title="General Design Principles" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013-2023, Marek Gagolewski.
      <span class="lastupdated">Last updated on 2022-12-31T12:21:19+1100.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>