<!DOCTYPE html>


<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Input and Output &mdash; stringi</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  
    <link rel="canonical" href="https://stringi.gagolewski.com/weave/input_output.html" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example Use Case: Data Preparation" href="example.html" />
    <link rel="prev" title="Other Operations" href="other_operations.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> stringi
          

          
          </a>

          
            
            
              <div class="version">
                1.7.12
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">stringi</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">About</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com/">Author</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing <em>stringi</em></a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/stringi">Source Code (GitHub)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/stringi/issues">Bug Tracker and Feature Suggestions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://cran.r-project.org/package=stringi">CRAN Entry</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="design_principles.html">General Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_operations.html">Basic String Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="codepoint_comparing.html">Code-Pointwise Comparing</a></li>
<li class="toctree-l1"><a class="reference internal" href="regular_expressions.html">Regular Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="collation.html">Collation</a></li>
<li class="toctree-l1"><a class="reference internal" href="other_operations.html">Other Operations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Input and Output</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dealing-with-unicode-code-points">Dealing with Unicode Code Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="#character-encodings">Character Encodings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reading-and-writing-text-files">Reading and Writing Text Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#detecting-encodings">Detecting Encodings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#converting-between-encodings">Converting Between Encodings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#normalising-strings">Normalising Strings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="example.html">Example Use Case: Data Preparation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rapi.html">R Package <em>stringi</em> Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://deepr.gagolewski.com">Deep R Programming</a></li>
<li class="toctree-l1"><a class="reference external" href="https://stringx.gagolewski.com/">stringx</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dx.doi.org/10.18637/jss.v103.i02">JStatSoft Paper</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/ExampleRcppStringi">C++ API — Rcpp Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../z_bibliography.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">stringi</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Input and Output</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="other_operations.html" class="btn btn-neutral float-left" title="Other Operations" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="example.html" class="btn btn-neutral float-right" title="Example Use Case: Data Preparation" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="input-and-output">
<span id="sec-io"></span><h1>Input and Output<a class="headerlink" href="#input-and-output" title="Permalink to this heading"></a></h1>
<blockquote>
<div><p>This tutorial is based on the <a class="reference external" href="https://dx.doi.org/10.18637/jss.v103.i02">paper on <em>stringi</em></a> that was published the <em>Journal of Statistical Software</em>; see <span id="id1">[<a class="reference internal" href="../z_bibliography.html#id3" title="M. Gagolewski. stringi: Fast and portable character string processing in R. Journal of Statistical Software, 103(2):1–59, 2022. doi:10.18637/jss.v103.i02.">Gag22</a>]</span>. To learn more about R, check out Marek’s recent open-access (free!) textbook <a class="reference external" href="https://deepr.gagolewski.com/"><em>Deep R Programming</em></a> <span id="id2">[<a class="reference internal" href="../z_bibliography.html#id4" title="M. Gagolewski. Deep R Programming. Zenodo, Melbourne, 2023. ISBN 978-0-6455719-2-9 (reserved). early draft. URL: https://deepr.gagolewski.com/, doi:10.5281/zenodo.7490464.">Gag23</a>]</span>.</p>
</div></blockquote>
<p>This section deals with some more advanced topics related to the
operability of text processing applications between different platforms.
In particular, we discuss how to ensure that data read from various
input connections are interpreted correctly.</p>
<section id="dealing-with-unicode-code-points">
<span id="sec-codepoints"></span><h2>Dealing with Unicode Code Points<a class="headerlink" href="#dealing-with-unicode-code-points" title="Permalink to this heading"></a></h2>
<p>The Unicode Standard (as well as the Universal Coded Character Set,
i.e., ISO/IEC 10646) currently defines over 140,000 abstract characters
together with their corresponding code points – integers between 0 and
1,114,111 (or 0000 and 10FFFF in hexadecimal notation,
see <a class="reference external" href="https://www.unicode.org/charts/">https://www.unicode.org/charts/</a>). In particular, here is the
number of the code points in some popular categories (compare
<a class="reference internal" href="regular_expressions.html#sec-regexindividualchars"><span class="std std-ref">Matching Individual Characters</span></a>), such as letters, numbers, and
the like.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;\\p{L}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\p{Ll}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\p{Lu}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\p{N}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\p{P}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\p{S}&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;\\w&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\d&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\s&quot;</span><span class="p">)</span>
<span class="nf">structure</span><span class="p">(</span><span class="nf">stri_count_regex</span><span class="p">(</span><span class="nf">stri_enc_fromutf32</span><span class="p">(</span>
<span class="w">  </span><span class="nf">setdiff</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="mh">0x10ffff</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="mh">0xd800</span><span class="o">:</span><span class="mh">0xf8ff</span><span class="p">))),</span><span class="w"> </span><span class="n">z</span><span class="p">),</span><span class="w"> </span><span class="n">names</span><span class="o">=</span><span class="n">z</span><span class="p">)</span>
<span class="c1">##  \\p{L} \\p{Ll} \\p{Lu}  \\p{N}  \\p{P}  \\p{S}     \\w     \\d     \\s </span>
<span class="c1">##  131241    2155    1791    1781     798    7564  134564     650      25</span>
</pre></div>
</div>
<p>Yet, most of the code points are still unallocated. The Unicode standard
is occasionally updated, e.g., the most recent versions were
supplemented with over 1,000 emojis.</p>
<p>The first 255 code points are identical to the ones defined by ISO/IEC
8859-1 (ISO Latin-1; “Western European”), which itself extends US-ASCII
(codes ≤ U+007f). For instance, the code point that we
are used to denoting as U+007A (the “U+” prefix is followed by a
sequence of hexadecimal digits; U+007A corresponds to decimal 122)
encodes the lower case letter “z”. To input such a code point in R, we
write:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;\u007A&quot;</span><span class="w">  </span><span class="c1"># or &quot;\U0000007A&quot;</span>
<span class="c1">## [1] &quot;z&quot;</span>
</pre></div>
</div>
<p>For communicating with <em>ICU</em> and other libraries, we may need to escape
a given string, for example, as follows (recall that to input a
backslash in R, we must escape it with another backslash).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;zß你好&quot;</span>
<span class="nf">stri_escape_unicode</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1] &quot;z\\u00df\\u4f60\\u597d&quot;</span>
</pre></div>
</div>
<p>Even though some output devices might
be unable to display certain code points correctly (due to, e.g.,
missing fonts), the correctness of their processing with <em>stringi</em> is
still guaranteed by <em>ICU</em>.</p>
</section>
<section id="character-encodings">
<span id="sec-encoding"></span><h2>Character Encodings<a class="headerlink" href="#character-encodings" title="Permalink to this heading"></a></h2>
<p>When storing strings in RAM or on the disk, we need to decide upon the
actual way of representing the code points as sequences of bytes. The
two most popular encodings in the Unicode family are UTF-8 and UTF-16:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;abz0ąß你好!&quot;</span>
<span class="nf">stri_encode</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">to_raw</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)[[</span><span class="m">1</span><span class="p">]]</span>
<span class="c1">##  [1] 61 62 7a 30 c4 85 c3 9f e4 bd a0 e5 a5 bd 21</span>
<span class="nf">stri_encode</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="o">=</span><span class="s">&quot;UTF-16LE&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">to_raw</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)[[</span><span class="m">1</span><span class="p">]]</span><span class="w">  </span><span class="c1"># little-endian</span>
<span class="c1">##  [1] 61 00 62 00 7a 00 30 00 05 01 df 00 60 4f 7d 59 21 00</span>
</pre></div>
</div>
<p>R’s current platform-default encoding, which we’ll refer to as the
native encoding, is defined via the <code class="docutils literal notranslate"><span class="pre">LC_CTYPE</span></code> locale category in
<code class="docutils literal notranslate"><span class="pre">Sys.getlocale()</span></code>. This is the representation assumed, e.g., when
reading data from the standard input or from files (e.g., when <code class="docutils literal notranslate"><span class="pre">scan()</span></code>
is called). For instance, Central European versions of Windows will
assume the “<code class="docutils literal notranslate"><span class="pre">windows-1250</span></code>” code page. On the other hand,
MacOS as well as most Linux boxes
work with UTF-8 by default<a class="footnote-reference brackets" href="#footucrt" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<p>All strings in R have an associated encoding mark which can be read by
calling <code class="docutils literal notranslate"><span class="pre">Encoding()</span></code> or, more conveniently, <code class="docutils literal notranslate"><span class="pre">stri_enc_mark()</span></code>. Most
importantly, strings in ASCII, ISO-8859-1 (”<code class="docutils literal notranslate"><span class="pre">latin1</span></code>”), UTF-8, and the
native encoding can coexist. Whenever a non-Unicode string is passed to
a function in <em>stringi</em>, it is silently converted to UTF-8 or UTF-16,
depending on the requested operation (some <em>ICU</em> services are only
available for UTF-16 data). Over the years, this has proven a robust,
efficient, and maximally portable design choice – Unicode can be
thought of as a superset of every other encoding. Moreover, in order to
guarantee the correctness and high performance of the string processing
pipelines, <em>stringi</em> always<a class="footnote-reference brackets" href="#footuftout" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> outputs UTF-8 data.</p>
</section>
<section id="reading-and-writing-text-files">
<span id="sec-read-lines"></span><h2>Reading and Writing Text Files<a class="headerlink" href="#reading-and-writing-text-files" title="Permalink to this heading"></a></h2>
<p>According to a report by
<a class="reference external" href="https://w3techs.com/technologies/cross/character_encoding/ranking">W3Techs</a>,
as of 2021-09-28, 97.3% of
websites use UTF-8. Nevertheless, other encodings can still be
encountered.</p>
<p>If we know the encoding of a text file in advance, <code class="docutils literal notranslate"><span class="pre">stri_read_lines()</span></code>
can be used to read the data in a manner similar to the built-in
<code class="docutils literal notranslate"><span class="pre">readLines()</span></code> function (but with a much easier access to encoding
conversion):</p>
<p>For instance, below we read a text file
(see <a class="reference external" href="https://github.com/gagolews/stringi/tree/master/docs/_static/vignette">https://github.com/gagolews/stringi/tree/master/docs/_static/vignette</a>)
encoded in ISO-8859-1:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">stri_read_lines</span><span class="p">(</span><span class="s">&quot;ES_latin1.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="o">=</span><span class="s">&quot;ISO-8859-1&quot;</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w">  </span><span class="c1"># x is in UTF-8 now</span>
<span class="c1">## [1] &quot;CANTO DE CALÍOPE - Miguel de Cervantes&quot;</span>
<span class="c1">## [2] &quot;&quot;                                      </span>
<span class="c1">## [3] &quot;Al dulce son de mi templada lira,&quot;     </span>
<span class="c1">## [4] &quot;prestad, pastores, el oído atento:&quot;</span>
</pre></div>
</div>
<p>We can call <code class="docutils literal notranslate"><span class="pre">stri_write_lines()</span></code> to write the contents of a character
vector to a file (each string will constitute a separate text line),
with any output encoding.</p>
</section>
<section id="detecting-encodings">
<h2>Detecting Encodings<a class="headerlink" href="#detecting-encodings" title="Permalink to this heading"></a></h2>
<p>If a file’s encoding is not known in advance, there are a
certain functions that can aid in encoding detection. First, we can read
the resource in the form of a raw-type vector:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">stri_read_raw</span><span class="p">(</span><span class="s">&quot;ES_latin1.txt&quot;</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">24</span><span class="p">)</span><span class="w">  </span><span class="c1"># vector of type raw</span>
<span class="c1">##  [1] 43 41 4e 54 4f 20 44 45 20 43 41 4c cd 4f 50 45 20 2d 20 4d 69 67 75 65</span>
</pre></div>
</div>
<p>Then, to guess the encoding, we can call, e.g.:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">stri_enc_isascii</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1] FALSE</span>
<span class="nf">stri_enc_isutf8</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">   </span><span class="c1"># false positives are possible</span>
<span class="c1">## [1] FALSE</span>
</pre></div>
</div>
<p>Alternatively, we can use:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">stri_enc_detect</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">  </span><span class="c1"># based on heuristics</span>
<span class="c1">## [[1]]</span>
<span class="c1">##     Encoding Language Confidence</span>
<span class="c1">## 1 ISO-8859-1       es       0.81</span>
<span class="c1">## 2 ISO-8859-2       ro       0.36</span>
<span class="c1">## 3 ISO-8859-9       tr       0.20</span>
<span class="c1">## 4   UTF-16BE                0.10</span>
<span class="c1">## 5   UTF-16LE                0.10</span>
</pre></div>
</div>
<p>Nevertheless, encoding detection is an operation that relies on
heuristics. Therefore, there is a chance that the output might be
imprecise or even misleading.</p>
</section>
<section id="converting-between-encodings">
<h2>Converting Between Encodings<a class="headerlink" href="#converting-between-encodings" title="Permalink to this heading"></a></h2>
<p>Knowing the desired source and destination encoding precisely,
<code class="docutils literal notranslate"><span class="pre">stri_encode()</span></code> can be called to perform the conversion. Contrary to the
built-in <code class="docutils literal notranslate"><span class="pre">iconv()</span></code>, which relies on different underlying libraries, the
current function is portable across operating systems.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">stri_encode</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="o">=</span><span class="s">&quot;ISO-8859-1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">stri_enc_list()</span></code> provides a list of supported encodings and their
aliases in many different forms. Encoding specifiers are normalised
automatically, e.g., <code class="docutils literal notranslate"><span class="pre">&quot;utf8&quot;</span></code> is a synonym for <code class="docutils literal notranslate"><span class="pre">&quot;UTF-8&quot;</span></code>.</p>
<p>Splitting the output into text lines gives:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">tail</span><span class="p">(</span><span class="nf">stri_split_lines1</span><span class="p">(</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w">  </span><span class="c1"># spoiler alert!</span>
<span class="c1">## [1] &quot;A Homero iguala si a escrebir intenta,&quot; </span>
<span class="c1">## [2] &quot;y a tanto llega de su pluma el vuelo,&quot;  </span>
<span class="c1">## [3] &quot;cuanto es verdad que a todos es notorio&quot;</span>
<span class="c1">## [4] &quot;el alto ingenio de don DIEGO OSORIO.&quot;</span>
</pre></div>
</div>
</section>
<section id="normalising-strings">
<span id="sec-normalisation"></span><h2>Normalising Strings<a class="headerlink" href="#normalising-strings" title="Permalink to this heading"></a></h2>
<p>In the section on <a class="reference internal" href="collation.html#sec-equivalence"><span class="std std-ref">Testing String Equivalence</span></a> we’ve provided some examples of
canonically equivalent strings whose code point representation was
different. Unicode <a class="reference external" href="https://www.unicode.org/reports/tr15/">normalisation</a>
forms C (Canonical composition, NFC)
and D (Canonical decomposition, NFD) can be applied so that they’ll
compare equal using bytewise matching.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;a\u0328 ą&quot;</span><span class="w">   </span><span class="c1"># a, combining ogonek, space, a with ogonek</span>
<span class="nf">stri_enc_toutf32</span><span class="p">(</span><span class="w">  </span><span class="c1"># code points as decimals</span>
<span class="w">  </span><span class="nf">c</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">stri_trans_nfc</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="nf">stri_trans_nfd</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>
<span class="c1">## [[1]]</span>
<span class="c1">## [1]  97 808  32 261</span>
<span class="c1">## </span>
<span class="c1">## [[2]]</span>
<span class="c1">## [1] 261  32 261</span>
<span class="c1">## </span>
<span class="c1">## [[3]]</span>
<span class="c1">## [1]  97 808  32  97 808</span>
</pre></div>
</div>
<p>Above we see some example code points before, after NFC, and after NFD
normalisation, respectively.</p>
<p>It might be a good idea always to normalise all the strings read from
external sources (files, URLs) with NFC.</p>
<p>Compatibility composition and decomposition normalisation forms (NFKC
and NFKD, respectively) are also available if the removal of the
formatting distinctions (font variants, subscripts, superscripts, etc.)
is desired. For example:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">stri_trans_nfkd</span><span class="p">(</span><span class="s">&quot;r²︷&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;r2{&quot;</span>
</pre></div>
</div>
<p>Such text might be much easier to process or analyse statistically.</p>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footucrt" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">1</a><span class="fn-bracket">]</span></span>
<p>It is expected that future R releases will support UTF-8 natively,
thanks to the Universal C Runtime (UCRT) that is available for
Windows 10.</p>
</aside>
<aside class="footnote brackets" id="footuftout" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p>Okay, with a few obvious exceptions, such as <code class="docutils literal notranslate"><span class="pre">stri_encode()</span></code>.</p>
</aside>
</aside>
</section>
</section>


           </div>
           
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="other_operations.html" class="btn btn-neutral float-left" title="Other Operations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="example.html" class="btn btn-neutral float-right" title="Example Use Case: Data Preparation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013-2023, Marek Gagolewski.
      <span class="lastupdated">Last updated on 2023-05-15T10:42:19+1000.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>